(function(){
function h(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}}var k="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function m(){m=function(){};k.Symbol||(k.Symbol=n)}var n=function(){var b=0;return function(c){return"jscomp_symbol_"+(c||"")+b++}}();
function p(b){if(!(b instanceof Array)){var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];b=c?c.call(b):{next:h(b)};for(var d=[];!(c=b.next()).done;)d.push(c.value);b=d}return b}function r(){}
k.Object.defineProperties(r,{a:{configurable:!0,enumerable:!0,get:function(){return"F0"}},c:{configurable:!0,enumerable:!0,get:function(){return"FS"}},f:{configurable:!0,enumerable:!0,get:function(){return"FX"}},b:{configurable:!0,enumerable:!0,get:function(){try{if(window.top===window)return r.a;if(window.top.document.domain===window.document.domain)return r.c}catch(b){}return r.f}}});m();var t=Symbol("AACViewabilityModel");m();var u=Symbol("AACViewabilityModel");function v(b){if(b!==u)throw"AACViewabilityModel is a singleton: Cannot construct directly. Use 'AACViewabilityModel.instance'";}v.prototype.m=function(b){this.ba=25;this.ea="20200211";this.N=this.R=-1;this.a=v.a.MRC;this.W="";this.w=null;this.g=b.viewabilityStandard;this.w=null;b.video||(this.g.A=1);this.W=b.vimpPixelBase;this.N=this.g.O;null!==this.g.A&&(this.R=Math.ceil(1E3*this.g.A/this.g.B))};
k.Object.defineProperties(v.prototype,{g:{configurable:!0,enumerable:!0,set:function(b){b&&b in v.a&&(this.a=v.a[b])},get:function(){return this.a}},O:{configurable:!0,enumerable:!0,get:function(){return this.g.O}},S:{configurable:!0,enumerable:!0,get:function(){return this.g.S}},B:{configurable:!0,enumerable:!0,get:function(){return this.g.B}},P:{configurable:!0,enumerable:!0,get:function(){return this.g.P}},A:{configurable:!0,enumerable:!0,get:function(){return this.g.A}},D:{configurable:!0,enumerable:!0,
get:function(){return this.g.D}}});k.Object.defineProperties(v,{c:{configurable:!0,enumerable:!0,get:function(){this[t]||(this[t]=new v(u));return this[t]}},a:{configurable:!0,enumerable:!0,get:function(){var b={};return b.GROUPM={O:100,S:!0,B:200,P:!1,A:null,D:50},b.MRC={O:50,S:!1,B:200,P:!0,A:2,D:null},b}},b:{configurable:!0,enumerable:!0,get:function(){return 15}}});function w(){}k.Object.defineProperties(w,{a:{configurable:!0,enumerable:!0,get:function(){return"INTERSECTION_OBSERVER"}},b:{configurable:!0,enumerable:!0,get:function(){return"IFRAME_BEACONS"}},c:{configurable:!0,enumerable:!0,get:function(){return"FULL_SCREEN_OVERRIDE"}},f:{configurable:!0,enumerable:!0,get:function(){return"NONE"}}});var x=window.BEACON_ZINDEX?window.BEACON_ZINDEX:-9999,y=window.BEACON_OPACITY?window.BEACON_OPACITY:.01,z=window.BEACON_SIZE?window.BEACON_SIZE:9;function A(b,c,d,e,f){this.h=b;this.index=c;this.j="frame_"+c+d;this.a="beaconProcess_"+c+d;this.V=null;this.f=e;this.resolve=null;this.b="number"===typeof window.mozPaintCount;this.c=f;this.l=document.createElement("iframe")}
A.prototype.m=function(){var b=this,c="";c=this.b?"parent.window."+this.a+"()":"\n        window.frameCount = 0;' +\n        var render = function(timestamp){' +\n           window.frameCount++; ' +\n           requestAnimationFrame(render.bind(this));' +\n        };\n        render();\n        parent.window.'"+this.a+"()";this.i="<html><head></head><body onload='"+c+"'></body></html>";B(this);return new Promise(function(c){b.resolve=c;b.h.appendChild(b.l);b.l.id=b.j;b.l.style.cssText="\n        position: absolute;\n        border: none;\n        z-index: "+
x+";\n        opacity: "+y+";\n        width: "+z+"px;\n        height: "+z+"px;\n        top: "+b.f.top+"px;\n        left: "+b.f.left+"px;";b.l.contentWindow.document.open().write(b.i);b.l.contentWindow.document.close()})};
function B(b){window[b.a]=function(){var c=b.l.contentWindow,d=b.b?0:4,e=b.b?"mozPaintCount":"frameCount",f=!1,g=!1,q=c[e];b.V=setInterval(function(){var l=c[e];!g&&l-q>d?(g=!0,b.c({type:"inview",index:b.index},"*")):g&&l-q<=d&&(g=!1,b.c({type:"outofview",index:b.index}));q=l;l=(16+Math.round(52*Math.random())).toString(16);c&&c.document&&(c.document.body.style.background=!0===g?"#"+l+"ff"+l:"#ff"+l+l);!1===f&&(b.c({type:"ready",index:b.index,state:g}),f=!0)},200)}};var C=window.BEACON_SIZE?window.BEACON_SIZE:9;m();var D=Symbol("Beacons");m();var E=Symbol("Beacons");function F(b){if(b!==E)throw"Beacons is a singleton: Cannot construct directly. Use 'Observer.instance'";this.X=(""+(new Date).getTime()+Math.floor(1E7*Math.random())).substr(0,16);this.C=null}
function G(){function b(b,d,e){var c=b.createElement("iframe");c.style.cssText="width:"+e+"px; height:"+e+"px; opacity:0.1";b.body.appendChild(c);c.contentWindow.document.write(d);return c}return"number"===typeof window.mozPaintCount?Promise.resolve():"function"!==typeof window.requestAnimationFrame?Promise.reject():new Promise(function(c,d){if("unit_test"===requestAnimationFrame(function(){}))c();else{window.a=function(b){return 2>b?c(b):d(b)};var e=b(document,"\n      <head>\n        <style>\n          body {\n            height:1000px;\n          }\n        </style>\n      </head>\n      <body/>",
100);b(e.contentWindow.document,"\n      <head>\n        <script>\n          function start(){\n            window.frameCount = 0;\n            var render = function(){\n              window.frameCount++;\n              requestAnimationFrame(render.bind(this));\n            };\n            render();\n            setTimeout(()=>{\n              window.parent.parent.updateFrameCount(window.frameCount);\n            },200);\n          };\n          function init(){\n            window.frameCount = 0;\n            var render = function(){\n            window.frameCount++;\n            if (window.frameCount > 10){\n              window.frameCount = 0;\n              window.parent.scroll(0,100);\n                start();\n            } else {\n              requestAnimationFrame(render.bind(this));\n            }\n          };\n          render();\n        }\n      \x3c/script>\n    </head>\n    <body/>",
10).contentWindow.m()}})}F.prototype.m=function(b,c){var d=this;this.f=b;this.N=c;this.h=[];this.a=Array(14);this.Z=0;this.j=1;this.u=2;this.v=3;this.o=4;this.s=5;this.L=6;this.M=7;this.J=8;this.K=9;this.H=10;this.I=11;this.F=12;this.G=13;H(this,!0);return new Promise(function(b,c){for(var e=[],f=0;f<d.i.length;f++){var l=new A(d.f,f,d.X,d.i[f],d.aa.bind(d));d.h.push(l);e.push(l.m())}Promise.all(e).then(function(){d.U();d.C=d.U.bind(d);window.addEventListener("resize",d.C,!1)}).then(b).catch(c)})};
function H(b,c){c=void 0===c?!1:c;b.T=b.f.getBoundingClientRect();b.b=b.T.width;b.c=b.T.height;var d=Math.sqrt(2),e=b.b/(1+d),f=b.c/(1+d),g=b.b/d;d=b.c/d;b.i=[{name:"CONTROL",left:c?b.b/2:-1E4,top:c?b.b/2:-1E4},{name:"CENTER",left:(b.b-C)/2,top:(b.c-C)/2},{name:"OUTER_TOP_LEFT",left:1,top:1},{name:"OUTER_TOP_RIGHT",left:b.b-C-1,top:1},{name:"OUTER_BOTTOM_LEFT",left:1,top:b.c-C-1},{name:"OUTER_BOTTOM_RIGHT",left:b.b-C-1,top:b.c-C-1},{name:"MIDDLE_TOP_LEFT",left:(b.b-g-C)/2,top:(b.c-d-C)/2},{name:"MIDDLE_TOP_RIGHT",
left:(b.b+g-C)/2,top:(b.c-d-C)/2},{name:"MIDDLE_BOTTOM_LEFT",left:(b.b-g-C)/2,top:(b.c+d-C)/2},{name:"MIDDLE_BOTTOM_RIGHT",left:(b.b+g-C)/2,top:(b.c+d-C)/2},{name:"INNER_TOP_LEFT",left:(b.b-e-C)/2,top:(b.c-f-C)/2},{name:"INNER_TOP_RIGHT",left:(b.b+e-C)/2,top:(b.c-f-C)/2},{name:"INNER_BOTTOM_LEFT",left:(b.b-e-C)/2,top:(b.c+f-C)/2},{name:"INNER_BOTTOM_RIGHT",left:(b.b+e-C)/2,top:(b.c+f-C)/2}]}
F.prototype.U=function(){H(this);for(var b=0;b<this.i.length;b++){var c=this.h[b].l,d=this.i[b];c.style.top=d.top+"px";c.style.left=d.left+"px"}};F.prototype.aa=function(b){switch(b.type){case "ready":this.h[b.index].resolve();this.a[b.index]=b.state;break;case "inview":this.a[b.index]=!0;break;case "outofview":this.a[b.index]=!1}};
F.prototype.$=function(){var b=0,c=0,d=0,e=0;if(this.a[this.Z])return"unmeasurable";for(var f=this.h.length-1,g=1;g<this.a.length;g++)if(this.a[g])switch(b++,g){case this.u:case this.v:case this.o:case this.s:c++;break;case this.L:case this.M:case this.J:case this.K:d++;break;case this.H:case this.I:case this.F:case this.G:e++}if(b===f)d="viewable";else if(100===this.N)d="unviewable";else{a:{e=[[this.u,this.L,this.H,this.j,this.G,this.K,this.s],[this.v,this.M,this.I,this.j,this.F,this.J,this.o]];
for(f=0;2>f;f++){g=e[f];for(var q=c=0;q<g.length;q++)if(b=this.a[g[q]],!0===b&&0===c)c++;else if(!1===b&&1===c)c++;else if(!0===b&&2===c){b=!0;break a}}b=!1}d=b?"unmeasurable":!0===this.a[this.j]&&(!0===this.a[this.u]&&!0===this.a[this.v]||!0===this.a[this.u]&&!0===this.a[this.o]||!0===this.a[this.v]&&!0===this.a[this.s]||!0===this.a[this.o]&&!0===this.a[this.s])||!0===this.a[this.j]&&4===d?"viewable":"unviewable"}return d};
F.prototype.Y=function(){window.removeEventListener("resize",this.C);this.h.forEach(function(b){clearInterval(b.V);b.l.parentNode.removeChild(b.l)})};k.Object.defineProperties(F,{a:{configurable:!0,enumerable:!0,get:function(){this[D]||(this[D]=new F(E));return this[D]}}});function I(){var b=J.b,c="IntersectionObserver";c=void 0===c?null:c;return new Promise(function(d,e){try{var f=document.createElement("script"),g=!1,q;if(c){var l=function(){window[c]?d(null):g?(q="ScriptLoader::loadScript() timed-out waiting for window['"+c+"'] to be exposed",e(q)):setTimeout(l,50)};l();setTimeout(function(){g=!0},5E3)}else"object"===typeof f.onload?(f.onload=d,f.onerror=function(){e(Error("ScriptLoader::loadScript() Error loading script : "+b))}):d(null);f.src=b;document.getElementsByTagName("head")[0].appendChild(f)}catch(V){e(Error("ScriptLoader::loadScript() : Error caught loading "+
b))}})};m();var K=Symbol("Observer");m();var L=Symbol("Observer");function J(b){if(b!==L)throw"Observer is a singleton: Cannot construct directly. Use 'Observer.instance'";this.intersectionRatio=0}function M(){return"function"===typeof window.IntersectionObserver?Promise.resolve():N()?Promise.reject(null):J.b.startsWith("{{")&&J.b.endsWith("}}")?(window.IntersectionObserver=function(){return"IO_POLYFILLED"},Promise.resolve()):I()}
function N(){for(var b=window;b!==window.top;)try{b=b.parent,J.a.intersectionRatio=b.document.href?0:.1}catch(c){return!0}return!1}J.prototype.m=function(b){this.target=b;this.a=new window.IntersectionObserver(this.f.bind(this),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});this.a.observe(this.target)};J.prototype.b=function(){this.a.unobserve(this.target)};J.prototype.f=function(b){var c=this;0===b.length?this.intersectionRatio=0:b.forEach(function(b){c.intersectionRatio=b.intersectionRatio})};
J.prototype.c=function(){return this.intersectionRatio};k.Object.defineProperties(J,{a:{configurable:!0,enumerable:!0,get:function(){this[K]||(this[K]=new J(L));return this[K]}},b:{configurable:!0,enumerable:!0,get:function(){return"https://playtime.tubemogul.com/ud/prod/pullins/io_polyfill-f88866.js"}}});m();var O=Symbol("AACViewabilityControl");m();var P=Symbol("AACViewabilityControl");function Q(b){if(b!==P)throw"AACViewabilityControl is a singleton: Cannot construct directly. Use 'AACViewabilityControl.instance'";}Q.prototype.m=function(b){var c=this;this.h="NONE";this.H=!1;this.s=NaN;this.J=this.G=0;this.i=this.j=this.u=!1;this.c=0;this.b="err";this.M="t:err:ifr";this.f=this.o=null;this.a=v.c;this.a.m(b);return new Promise(function(d){c.f=b.targetElement;R().then(function(b){c.h=b;d(null)})})};
function R(){return new Promise(function(b){M().then(b.bind(null,w.a)).catch(function(){G().then(b.bind(null,w.b)).catch(b.bind(null,w.f))})})}
function S(b){function c(){b.o={ca:b.h,da:b.c};b.h=w.c;b.c=100}document.fullscreenElement===b.f&&c();b.C||(b.C=function(){document.fullscreenElement===b.f?c():(b.h=b.o.ca,b.c=b.o.da,b.o=null)});["webkitbeginfullscreen","webkitendfullscreen","webkitfullscreenchange","mozfullscreenchange","fullscreenchange"].forEach(function(c){b.f.addEventListener(c,b.C)})}
function T(b){if(document.hidden)return b.b="f",b.b;var c=window.getComputedStyle(b.f);var d=c.getPropertyValue("visibility");c=c.getPropertyValue("display");if("hidden"===d||"none"===c||b.a.g.S&&b.a.w&&0>=b.a.w.getAdVolume())return b.b="f",b.b;switch(b.h){case w.c:return b.j=!0,b.i=!1,b.c=100,b.b="t",b.b;case w.a:return b.c=Math.round(100*J.a.c.call(J.a)),b.j=b.c>=b.a.N,b.i=!1,b.b=b.j?"t":"f",b.b;case w.b:return d=F.a.$.call(F.a),b.j="viewable"===d,b.i="unmeasurable"===d,b.c=0,d=b.i?"err":"f",b.b=
b.j?"t":d,b.b;case w.f:return b.i=!0,b.b="ifr",b.b}return"err"}Q.prototype.I=function(){var b=T(this);"t"===b?(null===this.a.g.D||this.H||(this.a.w&&0<this.a.w.getAdDuration()?(this.H=!0,b=this.a.w.getAdDuration()):b=v.b,this.a.R=Math.ceil(10*b*this.a.g.D/this.a.g.B)),0<this.a.R&&++this.G>=this.a.R&&(this.u||this.v.call(this,this.b))):"f"===b?this.a.g.P&&(this.G=0):++this.J>this.a.ba&&(this.u||this.v.call(this,this.b))};
Q.prototype.v=function(b){var c=this.a.W;if(this.M.includes(b)){this.u=!0;U(this);var d=this.F();d.vwbl=b;for(var e in d)(b=d[e])&&(c+="&"+e+"="+b);(new Image).src=c;window.top.postMessage([].concat(p(btoa(c))).reverse().join(""),"*")}else void 0};Q.prototype.K=function(b,c){this.a.w=c;switch(this.h){case w.a:J.a.m.call(J.a,this.f)}U(this);this.s=setInterval(this.I.bind(this),this.a.g.B);b&&S(this)};
Q.prototype.L=function(){U(this);switch(this.h){case w.a:J.a.a&&J.a.b.call(J.a);break;case w.b:F.a.Y.call(F.a)}};function U(b){isNaN(b.s)||(clearInterval(b.s),b.s=NaN)}Q.prototype.F=function(){var b={};return b.vwbl=T(this),b.vver=this.a.ea,b.vpct=this.c,b.ifr=r.b!==r.a,b};k.Object.defineProperties(Q,{a:{configurable:!0,enumerable:!0,get:function(){this[O]||(this[O]=new Q(P));return this[O]}}});
window.AACViewability=function(){var b=Q.a,c={};return c.init=Q.a.m.bind(Q.a),c.start=b.K.bind(b),c.stop=b.L.bind(b),c.getInfo=b.F.bind(b),c};
}).call(this)

//# sourceMappingURL=../maps/aac_viewability-ab8b7a.js.map
